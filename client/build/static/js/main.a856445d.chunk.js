(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{117:function(e,t,a){},118:function(e,t,a){},145:function(e,t){},148:function(e,t,a){},149:function(e,t,a){},150:function(e,t,a){},151:function(e,t,a){},157:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(64),u=a.n(c),o=(a(75),a(76),function(){return r.a.createElement("footer",{className:"container"},r.a.createElement("small",null," CipherChat | About"))}),s=a(2),i=a.n(s),l=a(6),m=a(3),f=a(19),p=a.n(f),h={get:p.a.get,post:p.a.post,put:p.a.put,delete:p.a.delete},v="http://localhost:4200/api/users",b=function(){var e=Object(l.a)(i.a.mark(function e(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.get(v);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),d=function(){var e=Object(l.a)(i.a.mark(function e(t){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.post(v,t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),E=function(){var e=Object(l.a)(i.a.mark(function e(t,a){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.put("".concat(v,"/").concat(t),a);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),g=function(){var e=Object(l.a)(i.a.mark(function e(t){var a,n;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.get("".concat(v,"/").concat(t));case 2:return a=e.sent,n=a.data,e.abrupt("return",Boolean(n));case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),O=function(){var e=Object(l.a)(i.a.mark(function e(t){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",h.post("".concat(v,"/auth/"),t));case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),j=function(){var e=Object(l.a)(i.a.mark(function e(){var t,a;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=localStorage.getItem("userToken"),a={headers:{"x-auth-token":t}},e.abrupt("return",h.get("".concat(v,"/auth"),a));case 3:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),w=a(16),x=a.n(w),y=x.a.SHA256,k=function(e){var t=e.history,a=Object(n.useState)(""),c=Object(m.a)(a,2),u=c[0],o=c[1],s=Object(n.useState)(""),f=Object(m.a)(s,2),p=f[0],h=f[1],v=function(){var e=Object(l.a)(i.a.mark(function e(a){var n,r,c;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.next=3,g(u);case 3:if(e.sent){e.next=6;break}return e.abrupt("return",alert("User with the username not found."));case 6:return n=y(u+p).toString(),e.prev=7,e.next=10,O({auth:n});case 10:r=e.sent,c=r.data,localStorage.setItem("userToken",c),alert("Account authenticated!"),t.push("/chat"),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(7),console.log(e.t0);case 20:case"end":return e.stop()}},e,null,[[7,17]])}));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"container"},r.a.createElement("form",{onSubmit:v},r.a.createElement("input",{className:"mb",type:"text",placeholder:"Pseudoname",value:u,onChange:function(e){var t=e.target;return o(t.value)}}),r.a.createElement("input",{className:"mb",type:"password",placeholder:"Secret Password",value:p,onChange:function(e){var t=e.target;return h(t.value)}}),r.a.createElement("input",{className:"btn-dark",type:"submit",value:"Login"}),r.a.createElement("a",{href:"/register"},"Don't have an account yet?")))},N=x.a.SHA256,S=function(e){var t=e.history,a=Object(n.useState)(""),c=Object(m.a)(a,2),u=c[0],o=c[1],s=Object(n.useState)(""),f=Object(m.a)(s,2),p=f[0],h=f[1],v=function(){var e=Object(l.a)(i.a.mark(function e(a){var n;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.next=3,g(u);case 3:if(!e.sent){e.next=6;break}return e.abrupt("return",alert("User with the username already exists"));case 6:return n=N(u+p).toString(),e.prev=7,e.next=10,d({username:u,auth:n});case 10:alert("Account has been created."),t.push("/login"),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(7),console.log(e.t0);case 17:case"end":return e.stop()}},e,null,[[7,14]])}));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"container"},r.a.createElement("form",{onSubmit:v},r.a.createElement("input",{className:"mb",type:"text",placeholder:"Pseudoname",value:u,onChange:function(e){var t=e.target;return o(t.value)}}),r.a.createElement("input",{className:"mb",type:"password",placeholder:"Secret Password",value:p,onChange:function(e){var t=e.target;return h(t.value)}}),r.a.createElement("input",{className:"btn-dark",type:"submit",value:"Register"}),r.a.createElement("a",{href:"/login"},"Already have an account?")))},C=a(11),A=a(69),B=a(68),U=(a(117),a(118),function(e){var t=e.username,a=e.name,n=e.message,c=a===t?"float-right max-width":"",u=a===t?"float-right text-align-right":"",o=a===t?"You":a;return r.a.createElement("div",{className:c},r.a.createElement("div",{id:"bubble-container",className:u},r.a.createElement("b",null,o)," ",r.a.createElement("br",null),r.a.createElement("div",{id:"message-bubble"},n)))}),D=a(28),F=a.n(D),I=F()(),P=function(e){var t=e.user,a=e.match,c=Object(n.useState)(""),u=Object(m.a)(c,2),o=u[0],s=u[1],i=Object(n.useState)([]),l=Object(m.a)(i,2),f=l[0],p=l[1],h=a.params.channel;Object(n.useEffect)(function(){return I.connect(),I.emit("get-chats",h),function(){return I.disconnect()}},[]),I.on("return-chats",function(e){v(e)}),I.on("new-message",function(e){v([].concat(Object(B.a)(f),[e]))});var v=function(e){p(e),b()},b=function(){var e=document.getElementById("chatbox");e.scrollTop=e.scrollHeight};return r.a.createElement("div",{className:"grid-container chatbox-container"},r.a.createElement("div",{id:"chatbox"},0===f.length?r.a.createElement("div",{className:"chat-notif"},"No messages yet. Say hello!"):f.map(function(e){return r.a.createElement(U,Object.assign({key:f.indexOf(e),username:t.username},e))})),r.a.createElement("div",{className:"message-form"},r.a.createElement("form",{onSubmit:function(e){e.preventDefault();var a={name:t.username,channel:h,message:o};I.emit("send-message",a),s("")}},r.a.createElement("input",{value:o,onChange:function(e){var t=e.target;s(t.value)},placeholder:"Type a message...",type:"text"}))),r.a.createElement("div",{className:"message-submit"},r.a.createElement("button",null,r.a.createElement("i",{className:"fas fa-paper-plane"}))))},T=x.a.MD5,H=function(e){var t=e.user,a=e.currUser,n=e.history;return r.a.createElement("div",{className:"container-item mb"},r.a.createElement("b",null,t.username),r.a.createElement("button",{onClick:function(){var e=[t.auth,a.auth].sort(),r=T(e.join());n.push("/chat/ch/"+r)}}," ",r.a.createElement("i",{className:"fas fa-comment"})))},L=(a(148),function(e){var t=e.user,a=e.history,c=Object(n.useState)([]),u=Object(m.a)(c,2),o=u[0],s=u[1],f=Object(n.useState)(""),p=Object(m.a)(f,2),h=p[0],v=p[1];return Object(n.useEffect)(function(){!function(){var e=Object(l.a)(i.a.mark(function e(){var t,a;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b();case 2:t=e.sent,a=t.data,s(a);case 5:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()()},[]),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"list mb"},o.map(function(e){return r.a.createElement(H,{key:o.indexOf(e),user:e,currUser:t,history:a})})),r.a.createElement("input",{value:h,onChange:function(e){var t=e.target;return v(t.value)},placeholder:"Search for someone to chat..."}))}),J=(a(149),a(65)),W=a.n(J),G=function(){return r.a.createElement("div",{id:"display-pic"},r.a.createElement("img",{alt:"anon",src:W.a,width:"42"}))},M=function(e){var t=e.username;return r.a.createElement("div",{id:"display-name"},r.a.createElement("b",null,t||"Loading..."))},R=function(e){var t=e.bio,a=e.onSave,c=Object(n.useState)(!1),u=Object(m.a)(c,2),o=u[0],s=u[1],i=Object(n.useState)(""),l=Object(m.a)(i,2),f=l[0],p=l[1],h=function(){return s(!o)};return Object(n.useEffect)(function(){p(t)},[t]),r.a.createElement("div",{id:"display-bio"},o?r.a.createElement(r.a.Fragment,null,r.a.createElement("input",{maxLength:"50",value:f,onChange:function(e){var t=e.target;return p(t.value)}}),r.a.createElement("i",{onClick:function(){if(t===f)return h();a(f),h()},className:"fas fa-save"})):r.a.createElement(r.a.Fragment,null,r.a.createElement("small",null,t||"bio"),r.a.createElement("i",{onClick:h,className:"fas fa-edit"})))},Y=function(e){var t=e.user,a=e.onUpdateBio;return r.a.createElement("div",{className:"container grid-container"},r.a.createElement(G,null),r.a.createElement(M,{username:t.username}),r.a.createElement(R,{onSave:a,bio:t.bio}),r.a.createElement("div",{onClick:function(){localStorage.clear(),window.location="/"},id:"logout"},r.a.createElement("button",null,r.a.createElement("i",{className:"fas fa-sign-out-alt"}))))},$=(a(150),function(e){var t=e.link,a=e.fa,n=e.label,c=e.navigate;return r.a.createElement("div",null,r.a.createElement("button",{onClick:function(){c(t)}},r.a.createElement("i",{className:a})," ",n))}),_=function(e){var t=e.history,a=Object(n.useState)([{fa:"fas fa-search",label:"",link:"/chat/search"},{fa:"fas fa-globe",label:"Global",link:"/chat/ch/global"},{fa:"fas fa-envelope",label:"Nicki...",link:"/chat/search"}]),c=Object(m.a)(a,2),u=c[0];c[1];return r.a.createElement("div",{className:"container-item nav mb"},r.a.createElement("div",{className:"nav-grid"},u.map(function(e){return r.a.createElement($,Object.assign({key:u.indexOf(e)},e,{navigate:(c[1],function(e){t.push(e)})}))})))},q=(a(151),F()()),z=function(e){var t=e.history,a=Object(n.useState)({}),c=Object(m.a)(a,2),u=c[0],o=c[1];Object(n.useEffect)(function(){q?console.log("Socket Connected!"):console.error("Sockeet connection failed."),function(){var e=Object(l.a)(i.a.mark(function e(){var t,a;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j();case 2:t=e.sent,a=t.data,o(a);case 5:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()()},[]);var s=function(){var e=Object(l.a)(i.a.mark(function e(t){var a;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(a=Object(A.a)({},u)).bio=t,e.prev=2,e.next=5,E(u._id,a);case 5:o(a),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),console.log(e.t0);case 11:case"end":return e.stop()}},e,null,[[2,8]])}));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement(Y,{onUpdateBio:s,history:t,user:u}),r.a.createElement("div",{className:"container chat"},r.a.createElement(_,{history:t}),r.a.createElement(C.d,null,r.a.createElement(C.b,{path:"/chat/ch/:channel",render:function(e){return r.a.createElement(P,Object.assign({},e,{user:u}))}}),r.a.createElement(C.b,{path:"/chat/list",render:function(e){return r.a.createElement(L,Object.assign({},e,{user:u}))}}),r.a.createElement(C.a,{from:"/chat",to:"/chat/list"}))))};var K=function(){return r.a.createElement("div",{className:"app"},r.a.createElement(C.d,null,r.a.createElement(C.b,{path:"/chat",component:z}),r.a.createElement(C.b,{path:"/login",component:k}),r.a.createElement(C.b,{path:"/register",component:S}),r.a.createElement(C.a,{from:"/",to:"/login"})),r.a.createElement(o,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(156);var Q=a(27);u.a.render(r.a.createElement(Q.a,null,r.a.createElement(K,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},65:function(e,t,a){e.exports=a.p+"static/media/profile.185df7f9.png"},70:function(e,t,a){e.exports=a(157)},75:function(e,t,a){},76:function(e,t,a){}},[[70,1,2]]]);
//# sourceMappingURL=main.a856445d.chunk.js.map