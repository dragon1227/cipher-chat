(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{138:function(e,t,a){e.exports=a.p+"static/media/profile.185df7f9.png"},143:function(e,t,a){e.exports=a(310)},148:function(e,t,a){},149:function(e,t,a){},193:function(e,t){},195:function(e,t){},230:function(e,t){},231:function(e,t){},273:function(e,t,a){},274:function(e,t,a){},298:function(e,t){},301:function(e,t,a){},302:function(e,t,a){},303:function(e,t,a){},304:function(e,t,a){},310:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(137),u=a.n(c),o=(a(148),a(149),function(){return r.a.createElement("footer",{className:"container"},r.a.createElement("small",null," CipherChat | About"))}),s=a(4),i=a.n(s),l=a(10),m=a(7),f=a(38),p=a.n(f),h={get:p.a.get,post:p.a.post,put:p.a.put,delete:p.a.delete},v="/api/users",b=function(){var e=Object(l.a)(i.a.mark(function e(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.get(v);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),d=function(){var e=Object(l.a)(i.a.mark(function e(t){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.post(v,t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),E=function(){var e=Object(l.a)(i.a.mark(function e(t,a){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.put("".concat(v,"/").concat(t),a);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),g=function(){var e=Object(l.a)(i.a.mark(function e(t){var a,n;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.get("".concat(v,"/").concat(t));case 2:return a=e.sent,n=a.data,e.abrupt("return",Boolean(n));case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),O=function(){var e=Object(l.a)(i.a.mark(function e(t){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",h.post("".concat(v,"/auth/"),t));case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),j=function(){var e=Object(l.a)(i.a.mark(function e(){var t,a;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=localStorage.getItem("userToken"),a={headers:{"x-auth-token":t}},e.abrupt("return",h.get("".concat(v,"/auth"),a));case 3:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),y=a(29),w=a.n(y),x=w.a.SHA256,k=function(e){var t=e.history,a=Object(n.useState)(""),c=Object(m.a)(a,2),u=c[0],o=c[1],s=Object(n.useState)(""),f=Object(m.a)(s,2),p=f[0],h=f[1],v=function(){var e=Object(l.a)(i.a.mark(function e(a){var n,r,c;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.next=3,g(u);case 3:if(e.sent){e.next=6;break}return e.abrupt("return",alert("User with the username not found."));case 6:return n=x(u+p).toString(),localStorage.setItem("privateKey_passPhrase",x(n+p)),e.prev=8,e.next=11,O({auth:n});case 11:r=e.sent,c=r.data,localStorage.setItem("userToken",c),alert("Account authenticated!"),t.push("/chat"),e.next=22;break;case 18:e.prev=18,e.t0=e.catch(8),console.log(e.t0),localStorage.clear();case 22:case"end":return e.stop()}},e,null,[[8,18]])}));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"container"},r.a.createElement("form",{onSubmit:v},r.a.createElement("input",{className:"mb",type:"text",placeholder:"Pseudoname",value:u,onChange:function(e){var t=e.target;return o(t.value)}}),r.a.createElement("input",{className:"mb",type:"password",placeholder:"Secret Password",value:p,onChange:function(e){var t=e.target;return h(t.value)}}),r.a.createElement("input",{className:"btn-dark",type:"submit",value:"Login"}),r.a.createElement("a",{href:"/register"},"Don't have an account yet?")))},S=a(74),N=a.n(S),C=w.a.SHA256,A=function(e){var t=e.history,a=Object(n.useState)(""),c=Object(m.a)(a,2),u=c[0],o=c[1],s=Object(n.useState)(""),f=Object(m.a)(s,2),p=f[0],h=f[1],v=function(){var e=Object(l.a)(i.a.mark(function e(a){var n,r,c,o;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.next=3,g(u);case 3:if(!e.sent){e.next=6;break}return e.abrupt("return",alert("User with the username already exists"));case 6:return n=C(u+p).toString(),r=C(n+p),c=N.a.generateRSAKey(r,1024),o=N.a.publicKeyString(c),e.prev=10,e.next=13,d({username:u,auth:n,publicKey:o});case 13:alert("Account has been created."),t.push("/login"),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(10),console.log(e.t0);case 20:case"end":return e.stop()}},e,null,[[10,17]])}));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"container"},r.a.createElement("form",{onSubmit:v},r.a.createElement("input",{className:"mb",type:"text",placeholder:"Pseudoname",value:u,onChange:function(e){var t=e.target;return o(t.value)}}),r.a.createElement("input",{className:"mb",type:"password",placeholder:"Secret Password",value:p,onChange:function(e){var t=e.target;return h(t.value)}}),r.a.createElement("input",{className:"btn-dark",type:"submit",value:"Register"}),r.a.createElement("a",{href:"/login"},"Already have an account?")))},B=a(21),U=a(142),D=a(141),I=(a(273),a(274),function(e){var t=e.username,a=e.name,n=e.message,c=a===t?"float-right max-width":"",u=a===t?"float-right text-align-right":"",o=a===t?"You":a;return r.a.createElement("div",{className:c},r.a.createElement("div",{id:"bubble-container",className:u},r.a.createElement("b",null,o)," ",r.a.createElement("br",null),r.a.createElement("div",{id:"message-bubble"},n)))}),P=a(50),F=a.n(P),K=F()(),T=function(e){var t=e.user,a=e.match,c=Object(n.useState)(""),u=Object(m.a)(c,2),o=u[0],s=u[1],i=Object(n.useState)([]),l=Object(m.a)(i,2),f=l[0],p=l[1],h=a.params.channel;Object(n.useEffect)(function(){return K.connect(),K.emit("get-chats",h),function(){return K.disconnect()}},[]),K.on("return-chats",function(e){v(e)}),K.on("new-message",function(e){v([].concat(Object(D.a)(f),[e]))});var v=function(e){p(e),d()},b=function(e){e.preventDefault();var a={name:t.username,channel:h,message:o};K.emit("send-message",a),s("")},d=function(){var e=document.getElementById("chatbox");e.scrollTop=e.scrollHeight};return r.a.createElement("div",{className:"grid-container chatbox-container"},r.a.createElement("div",{id:"chatbox"},0===f.length?r.a.createElement("div",{className:"chat-notif"},"No messages yet. Say hello!"):f.map(function(e){return r.a.createElement(I,Object.assign({key:f.indexOf(e),username:t.username},e))})),r.a.createElement("div",{className:"message-form"},r.a.createElement("form",{onSubmit:b},r.a.createElement("input",{value:o,onChange:function(e){var t=e.target;s(t.value)},placeholder:"Type a message...",type:"text"}))),r.a.createElement("div",{className:"message-submit"},r.a.createElement("button",{onClick:b},r.a.createElement("i",{className:"fas fa-paper-plane"}))))},H=w.a.MD5,L=function(e){var t=e.user,a=e.currUser,n=e.history;return r.a.createElement("div",{className:"container-item mb"},r.a.createElement("b",null,t.username),r.a.createElement("button",{onClick:function(){var e=[t.auth,a.auth].sort(),r=H(e.join());n.push("/chat/ch/"+r)}}," ",r.a.createElement("i",{className:"fas fa-comment"})))},J=(a(301),function(e){var t=e.user,a=e.history,c=Object(n.useState)([]),u=Object(m.a)(c,2),o=u[0],s=u[1],f=Object(n.useState)(""),p=Object(m.a)(f,2),h=p[0],v=p[1];return Object(n.useEffect)(function(){!function(){var e=Object(l.a)(i.a.mark(function e(){var t,a;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b();case 2:t=e.sent,a=t.data,s(a);case 5:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()()},[]),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"list mb"},o.map(function(e){return r.a.createElement(L,{key:o.indexOf(e),user:e,currUser:t,history:a})})),r.a.createElement("input",{value:h,onChange:function(e){var t=e.target;return v(t.value)},placeholder:"Search for someone to chat..."}))}),R=(a(302),a(138)),W=a.n(R),_=function(){return r.a.createElement("div",{id:"display-pic"},r.a.createElement("img",{alt:"anon",src:W.a,width:"42"}))},G=function(e){var t=e.username;return r.a.createElement("div",{id:"display-name"},r.a.createElement("b",null,t||"Loading..."))},M=function(e){var t=e.bio,a=e.onSave,c=Object(n.useState)(!1),u=Object(m.a)(c,2),o=u[0],s=u[1],i=Object(n.useState)(""),l=Object(m.a)(i,2),f=l[0],p=l[1],h=function(){return s(!o)};return Object(n.useEffect)(function(){p(t)},[t]),r.a.createElement("div",{id:"display-bio"},o?r.a.createElement(r.a.Fragment,null,r.a.createElement("input",{maxLength:"50",value:f,onChange:function(e){var t=e.target;return p(t.value)}}),r.a.createElement("i",{onClick:function(){if(t===f)return h();a(f),h()},className:"fas fa-save"})):r.a.createElement(r.a.Fragment,null,r.a.createElement("small",null,t||"bio"),r.a.createElement("i",{onClick:h,className:"fas fa-edit"})))},Y=function(e){var t=e.user,a=e.onUpdateBio;return r.a.createElement("div",{className:"container grid-container"},r.a.createElement(_,null),r.a.createElement(G,{username:t.username}),r.a.createElement(M,{onSave:a,bio:t.bio}),r.a.createElement("div",{onClick:function(){localStorage.clear(),window.location="/"},id:"logout"},r.a.createElement("button",null,r.a.createElement("i",{className:"fas fa-sign-out-alt"}))))},$=(a(303),function(e){var t=e.link,a=e.fa,n=e.label,c=e.navigate;return r.a.createElement("div",null,r.a.createElement("button",{onClick:function(){c(t)}},r.a.createElement("i",{className:a})," ",n))}),q=function(e){var t=e.history,a=Object(n.useState)([{fa:"fas fa-search",label:"",link:"/chat/search"},{fa:"fas fa-globe",label:"Global",link:"/chat/ch/global"},{fa:"fas fa-envelope",label:"Nicki...",link:"/chat/search"}]),c=Object(m.a)(a,2),u=c[0];c[1];return r.a.createElement("div",{className:"container-item nav mb"},r.a.createElement("div",{className:"nav-grid"},u.map(function(e){return r.a.createElement($,Object.assign({key:u.indexOf(e)},e,{navigate:(c[1],function(e){t.push(e)})}))})))},z=(a(304),F()()),Q=function(e){var t=e.history,a=Object(n.useState)({}),c=Object(m.a)(a,2),u=c[0],o=c[1];Object(n.useEffect)(function(){z?console.log("Socket Connected!"):console.error("Sockeet connection failed."),function(){var e=Object(l.a)(i.a.mark(function e(){var t,a;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j();case 2:t=e.sent,a=t.data,o(a);case 5:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()()},[]);var s=function(){var e=Object(l.a)(i.a.mark(function e(t){var a;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(a=Object(U.a)({},u)).bio=t,e.prev=2,e.next=5,E(u._id,a);case 5:o(a),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),console.log(e.t0);case 11:case"end":return e.stop()}},e,null,[[2,8]])}));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement(Y,{onUpdateBio:s,history:t,user:u}),r.a.createElement("div",{className:"container chat"},r.a.createElement(q,{history:t}),r.a.createElement(B.d,null,r.a.createElement(B.b,{path:"/chat/ch/:channel",render:function(e){return r.a.createElement(T,Object.assign({},e,{user:u}))}}),r.a.createElement(B.b,{path:"/chat/list",render:function(e){return r.a.createElement(J,Object.assign({},e,{user:u}))}}),r.a.createElement(B.a,{from:"/chat",to:"/chat/list"}))))};var V=function(){return r.a.createElement("div",{className:"app"},r.a.createElement(B.d,null,r.a.createElement(B.b,{path:"/chat",component:Q}),r.a.createElement(B.b,{path:"/login",component:k}),r.a.createElement(B.b,{path:"/register",component:A}),r.a.createElement(B.a,{from:"/",to:"/login"})),r.a.createElement(o,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(309);var X=a(49);u.a.render(r.a.createElement(X.a,null,r.a.createElement(V,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[143,1,2]]]);
//# sourceMappingURL=main.b7ce8d71.chunk.js.map